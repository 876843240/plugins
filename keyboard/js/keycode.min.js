var Keyboard=(function(){var a={contain:"myText",readOnce:false,container:document.body,layerColor:"#fff",layerOpacity:"0"};function c(j,f){var h={};for(var g in f){j[g]=f[g]}h=j;return h}function b(k){var k=c(a,k);this.firstClick=true;this.canInput=false;for(var h in k){this[h]=k[h]}var m=this.contain;if(!!m&&typeof m=="object"&&m.length>1){var l=Array.prototype.slice.call(m);for(var h=0,g=l.length;h<g;h++){if(typeof l[h]=="object"&&l[h].nodeType==1){d.call(this,l[h])}else{d.call(this,document.getElementById(l[h]))}}}else{d.call(this,document.getElementById(m))}}function d(g){var f=this;e("touchend",function(){f.bindEle=g;if(f.readOnce){if(f.firstClick){f.init();f.firstClick=false}}else{f.init()}},g)}function e(f,g,h){if(window.addEventListener){return binEvent=(function(){h.addEventListener(f,g,false)})()}else{return binEvent=(function(){h["on"+f]=g})()}}b.prototype={constructor:b,init:function(){var f=this.container,g=this.createBoard(),h=document.createElement("div");this.bindEle.blur();h.className="overlay";h.style.opacity=this.layerOpacity;h.style.backgroundColor=this.layerColor;var i=this.bindEle.type;if(i=="text"||i=="tel"||i=="number"||i=="email"){this.multiClass([g,h],"show-obj","addClass");this.clickEvent(g,h);f.appendChild(g);f.appendChild(h)}},clickEvent:function(g,h){var j=this.bindEle,f=this,i=j.type;e("touchend",function(n){var n=n||window.event,m=n.target,l=n.target.getAttribute("data-type"),k;n.stopPropagation();if(l=="input-num"){j.value+=m.getAttribute("data-num")}else{if(l=="input-del"||f.hasClass(m,"icon-cha")){k=j.value.length;console.log("aaaa");j.value=j.value.substr(0,k-1)}else{if(l=="input-sure"||f.hasClass(m,"icon-chenggong")){f.hideObj(g,h)}}}},g);e("touchend",function(m){var l=m.target,k;if(l.id==f.selector){k="addClass";f.removeClass(g,"hide-obj");f.multiClass([g,h],"show-obj",k)}else{if(l==h&&f.hasClass(l,"show-obj")){f.hideObj(g,h)}else{return false}}},document.body)},createDom:function(){var g="",f,l,k,j;if(this.readOnce){f=[0,1,2,3,4,5,6,7,8,9]}else{f=this.randomSortNum([0,1,2,3,4,5,6,7,8,9])}for(var h=0;h<12;h++){if(h==9){l="确定";k="input-sure";j="iconfont icon-chenggong"}else{if(h==11){l="取消";k="input-del";j="iconfont icon-cha"}else{if(h==10){l=f[9];k="input-num";j=" "}else{l=f[h];k="input-num";j=" "}}}g+='<a href="javascript:void(0);" role="button" data-num="'+l+'" data-type='+k+' class="key-btn"><span  class="'+j+'"></span>'+l+"</a>"}return g},createBoard:function(){var g=[],h=document.createElement("div"),f;h.className="main-key-contain";h.innerHTML=this.createDom();return h},toggleClass:function(g,f){if(g.className.indexOf(f)<0){this.addClass(g,f)}else{this.removeClass(g,f)}return this},hideObj:function(g,h){var f=this;this.addClass(g,"hide-obj");if(!this.readOnce){setTimeout(function(){f.container.removeChild(g);f.container.removeChild(h)},600)}else{setTimeout(function(){f.multiClass([h,g],"show-obj","removeClass")},600)}},hasClass:function(g,f){return g.className.match(f)},addClass:function(g,f){g.className+=" "+f;return this},multiClass:function(h,f,l){for(var k=0,g=h.length;k<g;k++){this[l](h[k],f)}},isArray:function(f){return Object.prototype.toString.call(f)=="[object Array]"},removeClass:function(g,f){g.className=g.className.replace(" "+f,"");return this},randomSortNum:function(k){var m=Object.prototype.toString.call(k),j=k,g;if(m.indexOf("object")<0){console.log("this is not a array");return false}else{if(m=="[object Object]"){try{for(var l in k){j[l]=k[l]}}catch(n){throw new Error("can't change this parameters")}}}for(var l=0,g=j.length;l<g-1;l++){var f=Math.floor(Math.random()*(g-l)),h=j[f];j[f]=j[g-l-1];j[g-l-1]=h}return j}};return function(f){return new b(f)}})();